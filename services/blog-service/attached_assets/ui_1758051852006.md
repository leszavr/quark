# Требования для бесшовной интеграции макета в Quark

## Описательная часть

Нужно создать веб-интерфейс главной страницы для сервиса блогов и мессенджера. Надо взять лучшие идеи и практики от x.com, twitter, telegram, whatsapp и VC.ru, Хабр, Дзен.

### На главной странице: 

- Шапка - слева логотип, название; справа кнопка "вход/регистрация", для зарегистрированных пользователей: индикатор пользователя, "Профиль", "Выход".
- Центральная часть - лента последних сообщений из блогов в кратком виде с названием блога/именем автора, датой публикации
- Правый сайд-бар - мессенджер с последними сообщениями в общем канале. Для рарегистрированных пользователей полнофункциональная версия, для гостей - только для просмотра.   Окно мессенджера можно свернуть/скрыть/отключить  с возможностью вернуть в исходное состояние. Для гостей - только общий канал, для зарегистрированных пользователей при развороте на весь экран поведение, аналогичное веб-версиям Telegram, Whatsapp: слева списки контактов, групп и каналов, справа - сообщения, с отображением сообщений, мультимедиа, файлов, эмоджи. Функционал - полный (писать сообщения, добавлять мультимедия, подписываться, описываться. комментировать и так далее)
- Подвал - слева логотип, название; справа контактная информация

- Доступные цветовые схемы:
    • Классический - минималистичный серый дизайн
    • Синий (Twitter/X) - динамичная голубая схема  
    • Фиолетовый (Discord) - креативная фиолетовая тема
    • Зеленый (WhatsApp) - свежая зеленая палитра
    • Оранжевый (Reddit) - энергичная оранжевая схема
    • Индиго (Telegram) - технологичная сине-серая тема


- Интерактивные элементы: анимация при наведении, плавные переходы цветов, градиентные акценты и улучшенная типографика. Чтобы можно было легко переключаться между темами через кнопку "Тема" в шапке сайта.

- Основные возможности:


    ✅ Переключение цветовых схем - 6 тем (классическая, синяя, фиолетовая, зеленая, оранжевая, индиго)  
    ✅ Авторизация - демо-переключатель между гостевым и пользовательским режимом  
    ✅ Лента блогов - интерактивные посты с лайками и комментариями  
    ✅ Мессенджер - полнофункциональный чат с отправкой сообщений и отображением мультимедиа в постах. 
    ✅ Адаптивный дизайн - работает на всех устройствах  
    ✅ Анимации - плавные переходы и hover-эффекты  

- Добавить также еще следующее:
1. Цветовые схемы надо открывать в модельном окне при клике на кнопку "Тема"
2. Добавь возможность раскрывать чат на весь экран: для гостей - общий канал, но с отображением полного содержания чата: мультимедия, эможди и т.д.;
для рарегистрированных пользователей, как в телеграм, whatsapp: слева список контактов и каналов, справа окно чата с полным содержанием, которое могут разместить собеседники: фото, видео, файлы, эмоджи.

- Профиль пользователя будет открываться в модельном окне, все поля редактируемые, логин - неизменен:
 * Аватар
 * Имя
 * Фамилия
 * Отчество
 * Email
 * Телефон
 * Форма смены пароля

- Улучшения UX
   * Плавные анимации открытия/закрытия модальных окон
   * Адаптивный дизайн для мобильных устройств  
   * Клавиатурные горячие клавиши (Enter для отправки)
   * Автопрокрутка к новым сообщениям
   * Индикаторы онлайн статуса и непрочитанных сообщений



## 1. Технические требования к макету

### Поддерживаемые форматы

```
✅ HTML/CSS/JS (чистый или с препроцессорами)
✅ React компоненты (JSX/TSX)
✅ Vue.js компоненты 
✅ Статические HTML файлы
✅ CSS модули / Styled Components
✅ SCSS/SASS файлы
```

### Структура файлов макета

```
design-package/
├── index.html          # Основная страница
├── styles/             
│   ├── main.css        # Основные стили
│   ├── components.css  # Стили компонентов
│   └── themes.css      # Цветовые схемы
├── scripts/
│   ├── main.js         # Основная логика
│   └── components.js   # Логика компонентов
├── assets/
│   ├── images/         # Изображения
│   ├── icons/          # Иконки
│   └── fonts/          # Шрифты
└── README.md           # Документация интеграции
```

## 2. Требования к стилизации

### CSS Framework совместимость

- ✅ Tailwind CSS (текущий)
- ✅ Bootstrap
- ✅ Material-UI 
- ✅ Чистый CSS
- ✅ CSS-in-JS решения

### Цветовые схемы (обязательно)

```css
/* Должны быть определены CSS переменные */
:root {
  --primary-color: #value;
  --secondary-color: #value;
  --background-color: #value;
  --text-color: #value;
  --border-color: #value;
}

/* Поддержка множественных тем */
.theme-light { /* переменные для светлой темы */ }
.theme-dark { /* переменные для темной темы */ }
.theme-blue { /* переменные для синей темы */ }
/* и т.д. */
```

### Адаптивность

```css
/* Обязательные breakpoints */
@media (max-width: 768px) { /* mobile */ }
@media (min-width: 769px) and (max-width: 1024px) { /* tablet */ }
@media (min-width: 1025px) { /* desktop */ }
```

## 3. Функциональные требования

### Обязательные компоненты

- **Header** с навигацией и переключателем тем
- **Основная область контента** (блог-лента, дашборд и т.д.)
- **Сайдбар/Мессенджер** (сворачиваемый/отключаемый/разворачиваемый на весь экран)
- **Footer** с информацией и ссылками
- **Система тем** (минимум 3 варианта)

### Обязательные интерактивности

- ✅ Переключение тем
- ✅ Сворачивание/разворачивание сайдбара
- ✅ Полноэкранный режим для компонентов
- ✅ Адаптивность (desktop/tablet/mobile)
- ✅ Smooth transitions и анимации
- ✅ Обработка пользовательского ввода

### Состояния компонентов

```javascript
// Мессенджер должен поддерживать состояния:
const messengerStates = ['normal', 'minimized', 'fullscreen', 'hidden'];

// Темы должны применяться глобально:
const themes = ['default', 'light', 'dark', 'blue', 'purple', 'green'];
```

## 4. Интеграционные требования

### API совместимость

```typescript
// Макет должен поддерживать эти пропсы
interface QuarkUIProps {
  theme: 'light' | 'dark' | string;
  user?: UserData;
  onThemeChange: (theme: string) => void;
  onMessageSend: (message: string) => void;
  onComponentStateChange: (component: string, state: any) => void;
  apiEndpoint: string;
  websocketUrl?: string;
}

interface UserData {
  id: string;
  name: string;
  avatar: string;
  role: string;
  isAuthenticated: boolean;
}

interface MessageData {
  id: string;
  author: string;
  content: string;
  timestamp: string;
  isOwn: boolean;
  chatId: string;
}

interface PostData {
  id: string;
  author: string;
  username: string;
  avatar: string;
  content: string;
  timestamp: string;
  likes: number;
  comments: number;
  reposts: number;
  image?: string;
}
```

### Event Handlers

```typescript
// Обязательные обработчики событий
interface RequiredHandlers {
  onThemeChange: (theme: string) => void;
  onMessengerStateChange: (state: MessengerState) => void;
  onUserInteraction: (action: string, data: any) => void;
  onNavigate: (path: string) => void;
  onError: (error: Error) => void;
}
```

## 5. Текущий стек Quark

### Технологии

- **Frontend:** React 18 + TypeScript
- **Build tool:** Vite
- **Styling:** Tailwind CSS
- **UI Components:** Radix UI primitives
- **Icons:** Lucide React
- **Routing:** React Router DOM
- **State Management:** React Context/useState

### API endpoints

```
/auth/*     - аутентификация и авторизация
/api/*      - основное REST API
/ws         - WebSocket соединения
```

### Proxy конфигурация

```javascript
// vite.config.ts
server: {
  proxy: {
    '/auth': { target: 'http://localhost:3001' },
    '/api': { target: 'http://localhost:3001' }
  }
}
```

## 6. Процесс интеграции

### Этапы интеграции

1. **Анализ макета**
   - Автоматический парсинг структуры файлов
   - Определение используемых технологий
   - Выявление зависимостей

2. **Конвертация (если необходимо)**
   - HTML/CSS/JS → React компоненты
   - Vanilla JS → TypeScript
   - CSS → Tailwind/CSS модули

3. **Интеграция API**
   - Подключение к существующим endpoints
   - Настройка WebSocket соединений
   - Реализация обработчиков данных

4. **Тестирование**
   - Проверка всех интерактивностей
   - Тестирование адаптивности
   - Валидация производительности

5. **Оптимизация**
   - Bundle size оптимизация
   - Lazy loading компонентов
   - Кэширование ресурсов

## 7. Рекомендуемые форматы макетов

### 1. Готовый React проект (ПРЕДПОЧТИТЕЛЬНО)

```
react-design/
├── package.json
├── src/
│   ├── components/
│   ├── styles/
│   ├── assets/
│   └── types/
└── public/
```

**Преимущества:** Минимальная конвертация, прямая интеграция

### 2. HTML/CSS/JS с документацией

```
html-design/
├── index.html
├── css/
├── js/
├── assets/
└── integration-guide.md
```

**Преимущества:** Полный контроль над конвертацией

### 3. Design System (Storybook)

```
design-system/
├── .storybook/
├── src/
│   ├── components/
│   └── tokens/
└── package.json
```

**Преимущества:** Готовые компоненты с документацией

### 4. Figma + экспорт кода

**Поддерживаемые плагины:**
- Figma to React
- Figma to HTML/CSS
- Design Tokens (для цветовых схем)

## 8. Критерии качества интеграции

### Обязательные критерии

- ✅ **100% визуальное соответствие** оригинальному дизайну
- ✅ **Полная функциональность** всех интерактивных элементов
- ✅ **Адаптивность** на всех устройствах
- ✅ **Производительность** (загрузка < 3 сек)
- ✅ **Доступность** (WCAG 2.1 AA)

### Дополнительные критерии

- ✅ SEO оптимизация
- ✅ PWA поддержка
- ✅ Темная тема
- ✅ Интернационализация (i18n)
- ✅ Аналитика и метрики

## 9. Примеры успешной интеграции

### Структура интегрированного компонента

```typescript
// Пример интегрированного компонента
interface IntegratedComponent {
  // Оригинальный дизайн сохранен
  originalStyles: CSSProperties;
  
  // Quark API интеграция
  quarkProps: QuarkUIProps;
  
  // Обработчики событий
  handlers: RequiredHandlers;
  
  // Состояние компонента
  state: ComponentState;
}
```

### Файловая структура после интеграции

```
/var/www/quark/infra/quark-ui/
├── src/
│   ├── components/
│   │   ├── integrated/     # Интегрированные компоненты
│   │   ├── original/       # Оригинальные Quark компоненты
│   │   └── shared/         # Общие компоненты
│   ├── styles/
│   │   ├── integrated.css  # Стили интегрированного дизайна
│   │   └── quark.css       # Базовые стили Quark
│   └── types/
│       └── integrated.ts   # Типы для интеграции
```

## 10. Контрольный чек-лист

### Перед интеграцией

- [ ] Макет содержит все обязательные компоненты
- [ ] Определены цветовые схемы (CSS переменные)
- [ ] Реализована адаптивность
- [ ] Есть интерактивные элементы
- [ ] Документация по интеграции

### После интеграции

- [ ] Визуальное соответствие 100%
- [ ] Все интерактивности работают
- [ ] API подключено корректно
- [ ] Темы переключаются
- [ ] Адаптивность работает
- [ ] Производительность в норме
- [ ] Нет ошибок в консоли

---

**Важно:** При предоставлении макета в любом из указанных форматов, интеграция будет выполнена с сохранением **100% оригинального дизайна** и всей функциональности.
