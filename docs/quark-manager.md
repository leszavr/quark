# Quark –ú–ö–° Service Manager

## –û–±–∑–æ—Ä

**Quark –ú–ö–° Service Manager** (`quark-manager.sh`) - —ç—Ç–æ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ–º–∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã Quark. –°–∫—Ä–∏–ø—Ç –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —É–¥–æ–±–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ —Å —Ü–≤–µ—Ç–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ —É—á–µ—Ç–æ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker (–≤–µ—Ä—Å–∏—è 20.0+)
- Docker Compose (–≤–µ—Ä—Å–∏—è 1.25+)
- bash (–≤–µ—Ä—Å–∏—è 4.0+)
- curl (–¥–ª—è health checks)

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫
```bash
# –°–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x quark-manager.sh

# –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É
./quark-manager.sh --help

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
./quark-manager.sh start
```

## –ö–æ–º–∞–Ω–¥—ã

### üöÄ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º

#### `start` - –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
./quark-manager.sh start

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ —É–∫–∞–∑–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
./quark-manager.sh start redis plugin-hub

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
./quark-manager.sh start postgres redis nats vault
```

#### `stop` - –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
./quark-manager.sh stop

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —É–∫–∞–∑–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
./quark-manager.sh stop monitoring plugin-hub
```

#### `restart` - –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
./quark-manager.sh restart

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
./quark-manager.sh restart monitoring
```

### üî® –°–±–æ—Ä–∫–∞ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

#### `build` - –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤
```bash
# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –≤—Å–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
./quark-manager.sh build

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ Plugin Hub
./quark-manager.sh build plugin-hub
```

#### `rebuild` - –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ —Å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º
```bash
# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
./quark-manager.sh rebuild

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
./quark-manager.sh rebuild monitoring
```

### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

#### `status` - –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
# –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ —Å —Ü–≤–µ—Ç–∞–º–∏
./quark-manager.sh status
```

–í—ã–≤–æ–¥:
```
‚úÖ postgres - –†–ê–ë–û–¢–ê–ï–¢ (PostgreSQL Database (port 5432))
‚úÖ redis - –†–ê–ë–û–¢–ê–ï–¢ (Redis Cache & State Store (port 6379))
‚úÖ plugin-hub - –†–ê–ë–û–¢–ê–ï–¢ (Plugin Hub - –ú–ö–° Command Module (port 3000))
‚ùå auth - –ù–ï –°–û–ó–î–ê–ù (Auth Service (port 3001))
```

#### `health` - Health check API
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å health –≤—Å–µ—Ö API —Å–µ—Ä–≤–∏—Å–æ–≤
./quark-manager.sh health
```

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:
- Plugin Hub API (http://localhost:3000/health)
- Monitoring Dashboard (http://localhost:3900)
- –ë—É–¥—É—â–∏–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã...

#### `logs` - –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
# –õ–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
./quark-manager.sh logs

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
./quark-manager.sh logs plugin-hub

# –õ–æ–≥–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
./quark-manager.sh logs plugin-hub monitoring
```

### üßπ –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

#### `clean` - –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
```bash
# ‚ö†Ô∏è –û–°–¢–û–†–û–ñ–ù–û: –£–¥–∞–ª—è–µ—Ç –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –æ–±—Ä–∞–∑—ã –∏ volumes
./quark-manager.sh clean
```

#### `list` - –°–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
./quark-manager.sh list
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

### üèó –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

| –°–µ—Ä–≤–∏—Å | –ü–æ—Ä—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|------|----------|
| `postgres` | 5432 | PostgreSQL Database |
| `redis` | 6379 | Redis Cache & State Store |
| `nats` | 4222 | NATS JetStream Event Bus |
| `vault` | 8200 | HashiCorp Vault Secrets Manager |
| `traefik` | 80/443/8080 | Traefik API Gateway |
| `minio` | 9000/9001 | MinIO Object Storage |

### üöÄ –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã (–ø–æ—Ä—Ç—ã 3000-3020)

| –°–µ—Ä–≤–∏—Å | –ü–æ—Ä—Ç | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|------|--------|----------|
| `plugin-hub` | 3000 | ‚úÖ –ì–æ—Ç–æ–≤ | Plugin Hub - –ú–ö–° Command Module |
| `monitoring` | 3900 | ‚úÖ –ì–æ—Ç–æ–≤ | Monitoring Dashboard |
| `auth` | 3001 | üìã –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è | Auth Service |
| `user` | 3002 | üìã –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è | User Service |
| `media` | 3003 | üìã –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è | Media Service |
| `blog` | 3004 | üìã –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è | Blog Service |
| `messaging` | 3005 | üìã –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è | Messaging Service |

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–∫—Ä–∏–ø—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ —Ñ–∞–π–ª `logs/quark-manager.log` —Å timestamp:

```
[2025-09-15 12:30:45] [INFO] üöÄ –ó–∞–ø—É—Å–∫ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤: plugin-hub
[2025-09-15 12:30:46] [SUCCESS] ‚úÖ –ó–∞–ø—É—Å–∫ –∑–∞–≤–µ—Ä—à–µ–Ω!
[2025-09-15 12:31:15] [INFO] üìä –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤ –ú–ö–° Quark
```

## –ü–æ—Ä—è–¥–æ–∫ –∑–∞–ø—É—Å–∫–∞

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–ª—é–¥–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –∑–∞–ø—É—Å–∫–∞ —Å —É—á–µ—Ç–æ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:

1. **postgres** - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Ñ—É–Ω–¥–∞–º–µ–Ω—Ç)
2. **redis** - –ö–µ—à –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ  
3. **nats** - Event Bus
4. **vault** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞–º–∏
5. **traefik** - API Gateway
6. **minio** - Object Storage
7. **plugin-hub** - –ö–æ–º–∞–Ω–¥–Ω—ã–π –º–æ–¥—É–ª—å –ú–ö–°
8. **monitoring** - –ü–∞–Ω–µ–ª—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –¢–∏–ø–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –£—Ç—Ä–µ–Ω–Ω–∏–π –∑–∞–ø—É—Å–∫: –≤–∫–ª—é—á–∏—Ç—å –≤—Å—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É
./quark-manager.sh start

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
./quark-manager.sh status
./quark-manager.sh health

# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ Plugin Hub: –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ + –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
./quark-manager.sh rebuild plugin-hub

# –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º: —Å–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏
./quark-manager.sh logs plugin-hub

# –í–µ—á–µ—Ä–Ω—è—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞: –≤—ã–∫–ª—é—á–∏—Ç—å –≤—Å–µ
./quark-manager.sh stop
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞

1. **–î–æ–±–∞–≤–∏—Ç—å –≤ docker-compose.yml:**
```yaml
auth-service:
  build: ./services/auth-service
  container_name: quark-auth
  environment:
    - PORT=3001
  ports:
    - "3001:3001"
  networks:
    - quark-network
```

2. **–û–±–Ω–æ–≤–∏—Ç—å quark-manager.sh:**
```bash
# –î–æ–±–∞–≤–∏—Ç—å –≤ –º–∞—Å—Å–∏–≤ SERVICES
["auth"]="Auth Service (port 3001)"

# –î–æ–±–∞–≤–∏—Ç—å –≤ –ø–æ—Ä—è–¥–æ–∫ –∑–∞–ø—É—Å–∫–∞ STARTUP_ORDER
"auth"
```

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
```bash
./quark-manager.sh build auth
./quark-manager.sh start auth
```

## –û–ø—Ü–∏–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

- `-f, --force` - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
- `-q, --quiet` - –¢–∏—Ö–∏–π —Ä–µ–∂–∏–º (—Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è)
- `-v, --verbose` - –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
- `-h, --help` - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Docker

–°–∫—Ä–∏–ø—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö Docker Compose –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

- –°–æ–∑–¥–∞–µ—Ç Docker-—Å–µ—Ç—å `quark-network`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ Docker –∏ Docker Compose
- –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ docker-compose.yml
- –£—á–∏—Ç—ã–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç graceful shutdown

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- ‚ö†Ô∏è –ö–æ–º–∞–Ω–¥–∞ `clean` —Ç—Ä–µ–±—É–µ—Ç –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –°–µ—Ä–≤–∏—Å –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
./quark-manager.sh status

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
./quark-manager.sh logs <service-name>

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑
./quark-manager.sh rebuild <service-name>
```

### –ü—Ä–æ–±–ª–µ–º–∞: Docker network –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
```bash
# –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç —Å–µ—Ç—å –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
./quark-manager.sh start
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–Ω—Ñ–ª–∏–∫—Ç –ø–æ—Ä—Ç–æ–≤
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∫–∏–µ –ø–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã
sudo netstat -tulpn | grep :3000

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã
sudo systemctl stop <conflicting-service>
```

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é (–∫–æ–º–∞–Ω–¥–∞ `menu`)
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Docker Swarm
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Kubernetes
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ backups
- [ ] Monitoring —á–µ—Ä–µ–∑ Prometheus
- [ ] CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

---

> **Quark –ú–ö–° Service Manager** - –≤–∞—à –Ω–∞–¥–µ–∂–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π! üöÄ
