# üöÄ QUARK-MANAGER.SH - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –û–±–∑–æ—Ä

`quark-manager.sh` - —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ–º–∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã Quark. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∑–∞–ø—É—Å–∫–∞, –æ—Å—Ç–∞–Ω–æ–≤–∫–∏, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏.

**–í–µ—Ä—Å–∏—è**: 2.1  
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `/home/odmen/quark/quark-manager.sh`  
**–Ø–∑—ã–∫**: Bash 4.0+  
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: Docker, Docker Compose v2, Node.js (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã)

---

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï

> **–ü–ï–†–ï–î –õ–Æ–ë–û–ô –ü–†–ê–í–ö–û–ô –≠–¢–û–ì–û –°–ö–†–ò–ü–¢–ê**:
> 
> 1. ‚úÖ –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ `/docs/CRITICAL-CONFIG.md`
> 2. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å `.env` —Ñ–∞–π–ª–æ–º
> 3. ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è `main()` –æ—Å—Ç–∞–µ—Ç—Å—è —Ü–µ–ª–æ—Å—Ç–Ω–æ–π
> 4. ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
> 5. ‚úÖ –û–±–Ω–æ–≤–∏—Ç–µ —ç—Ç—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ –∏—Å—Ç–æ—Ä–∏–∏**:
- 2025-11-06: –ù–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–∏–≤—ë–ª –∫ –≤—ã–∑–æ–≤—É –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π `parse_args()` –∏ `execute_command()`. –†–µ—à–µ–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º –∏–∑ git –∏—Å—Ç–æ—Ä–∏–∏.

---

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞

```bash
#!/bin/bash
‚îú‚îÄ‚îÄ –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Å—Ç—Ä–æ–∫–∏ 1-50)
‚îú‚îÄ‚îÄ –£—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (—Å—Ç—Ä–æ–∫–∏ 51-150)
‚îÇ   ‚îú‚îÄ‚îÄ check_env_file()      # NEW: –ü—Ä–æ–≤–µ—Ä–∫–∞ .env —Ñ–∞–π–ª–∞
‚îÇ   ‚îú‚îÄ‚îÄ log()                  # –ó–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª –ª–æ–≥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ print_log()            # –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ + –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ show_logo()            # –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ show_help()            # –°–ø—Ä–∞–≤–∫–∞
‚îú‚îÄ‚îÄ –§—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ (—Å—Ç—Ä–æ–∫–∏ 151-250)
‚îÇ   ‚îú‚îÄ‚îÄ check_requirements()   # Docker, Compose, —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ validate_service()     # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–µ–Ω–∏ —Å–µ—Ä–≤–∏—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ show_status()          # –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ check_project_structure() # Node.js –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
‚îú‚îÄ‚îÄ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (—Å—Ç—Ä–æ–∫–∏ 251-350)
‚îÇ   ‚îú‚îÄ‚îÄ start_services()       # –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ stop_services()        # –û—Å—Ç–∞–Ω–æ–≤–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ rebuild_services()     # –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ health_check()         # –ü—Ä–æ–≤–µ—Ä–∫–∞ health endpoints
‚îî‚îÄ‚îÄ –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è (—Å—Ç—Ä–æ–∫–∏ 351-–∫–æ–Ω–µ—Ü)
    ‚îî‚îÄ‚îÄ main()                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –ø–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
```

---

## üîß –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π

### 1. –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (—Å—Ç—Ä–æ–∫–∏ 1-50)

```bash
#!/bin/bash
set -e  # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ

# –¶–≤–µ—Ç–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞ (ANSI escape codes)
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
PURPLE='\033[0;35m'
CYAN='\033[0;36m'
WHITE='\033[1;37m'
NC='\033[0m' # No Color

# –ü—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" &> /dev/null && pwd)"
LOG_DIR="$SCRIPT_DIR/logs"
LOG_FILE="$LOG_DIR/quark-manager.log"
COMPOSE_FILE="$SCRIPT_DIR/docker-compose.yml"
ENV_FILE="$SCRIPT_DIR/.env"

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–∫–∏ –¥–ª—è –ª–æ–≥–æ–≤
mkdir -p "$LOG_DIR"

# –§–ª–∞–≥–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º
SKIP_ENV_CHECK=false
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: 
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ü–≤–µ—Ç–æ–≤—É—é —Å—Ö–µ–º—É –¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ –≤—ã–≤–æ–¥–∞ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø—É—Ç–∏ –∫ –∫—Ä–∏—Ç–∏—á–Ω—ã–º —Ñ–∞–π–ª–∞–º
- –°–æ–∑–¥–∞—ë—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ª–æ–≥–æ–≤ –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ñ–ª–∞–≥–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**–ö—Ä–∏—Ç–∏—á–Ω–æ**: 
- `set -e` - —Å–∫—Ä–∏–ø—Ç –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ (fail-fast –ø–æ–¥—Ö–æ–¥)
- `SCRIPT_DIR` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–æ –≤—Å–µ—Ö –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—É—Ç—è—Ö
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —ç—Ç–∏ –ø—É—Ç–∏

---

### 2. check_env_file() - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤

```bash
check_env_file() {
  if [ ! -f "$ENV_FILE" ] && [ "$SKIP_ENV_CHECK" = false ]; then
    echo -e "${RED}‚ùå –§–∞–π–ª .env –Ω–µ –Ω–∞–π–¥–µ–Ω!${NC}"
    echo -e "${YELLOW}–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞${NC}"
    echo -e "${YELLOW}POSTGRES_USER=quark_user${NC}"
    echo -e "${YELLOW}POSTGRES_PASSWORD=quark_password${NC}"
    echo -e "${YELLOW}MINIO_ROOT_USER=minioadmin${NC}"
    echo -e "${YELLOW}MINIO_ROOT_PASSWORD=minioadmin${NC}"
    echo -e "${YELLOW}VAULT_DEV_ROOT_TOKEN_ID=myroot${NC}"
    echo ""
    echo -e "${CYAN}–î–ª—è –ø—Ä–æ–ø—É—Å–∫–∞: --skip-env-check${NC}"
    exit 1
  fi
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ `.env` —Ñ–∞–π–ª–∞ —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –ª—é–±—ã—Ö –∫–æ–º–∞–Ω–¥.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: –ù–µ—Ç (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ `$ENV_FILE` –∏ `$SKIP_ENV_CHECK`)  
**–í–æ–∑–≤—Ä–∞—Ç**: Exit 1 –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ `.env` (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Ñ–ª–∞–≥)  
**–§–ª–∞–≥ –æ–±—Ö–æ–¥–∞**: `--skip-env-check`

**–î–æ–±–∞–≤–ª–µ–Ω–æ**: 2025-11-06  
**–°–≤—è–∑–∞–Ω–æ —Å**: 
- ADR-010 (–°–µ–∫—Ä–µ—Ç—ã —á–µ—Ä–µ–∑ .env —Ñ–∞–π–ª)
- `/docs/CRITICAL-CONFIG.md` —Ä–∞–∑–¥–µ–ª "Secrets Management"

**–ö–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è**: –°–∞–º–∞—è –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `main()` –ø–µ—Ä–µ–¥ –≤—Å–µ–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏

**–í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã**: 
- ‚úÖ –ó–∞—â–∏—â–∞–µ—Ç –æ—Ç –∑–∞–ø—É—Å–∫–∞ —Å —Ö–∞—Ä–¥–∫–æ–¥ –ø–∞—Ä–æ–ª—è–º–∏
- ‚úÖ –í—ã–≤–æ–¥–∏—Ç –ø—Ä–∏–º–µ—Ä—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è `.env`
- ‚úÖ –ú–æ–∂–Ω–æ –æ–±–æ–π—Ç–∏ —Ñ–ª–∞–≥–æ–º –¥–ª—è CI/CD –æ–∫—Ä—É–∂–µ–Ω–∏–π
- ‚ö†Ô∏è –ù–ï –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `.env`, —Ç–æ–ª—å–∫–æ –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```bash
# –ù–æ—Ä–º–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π
./quark-manager.sh start

# –û–±—Ö–æ–¥ –ø—Ä–æ–≤–µ—Ä–∫–∏ (–¥–ª—è CI/CD)
./quark-manager.sh --skip-env-check start
```

---

### 3. log() –∏ print_log() - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
log() {
    local level="$1"
    shift
    local message="$*"
    local timestamp=$(date '+%Y-%m-%d %H:%M:%S')
    echo "[$timestamp] [$level] $message" >> "$LOG_FILE"
}

print_log() {
    local color="$1"
    local level="$2"
    shift 2
    local message="$*"
    echo -e "${color}$message${NC}"
    log "$level" "$message"
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: 
- `log()` - —Ç–∏—Ö–∞—è –∑–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª –ª–æ–≥–æ–≤ —Å –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–æ–π
- `print_log()` - —Ü–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª + –∑–∞–ø–∏—Å—å –≤ –ª–æ–≥

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `log(level, message...)` 
  - `level`: INFO | WARN | ERROR | SUCCESS
  - `message`: —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è (–º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–±–µ–ª—ã)
- `print_log(color, level, message...)`
  - `color`: —Ü–≤–µ—Ç–æ–≤–∞—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ ($RED, $GREEN –∏ —Ç.–¥.)
  - `level`: —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
  - `message`: —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä—ã**:
```bash
# –ü—Ä–æ—Å—Ç–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª
log "INFO" "–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞ auth-service"

# –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ + –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
print_log "$GREEN" "SUCCESS" "‚úÖ –ó–∞–ø—É—Å–∫ –∑–∞–≤–µ—Ä—à–µ–Ω!"
print_log "$RED" "ERROR" "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö"
print_log "$YELLOW" "WARN" "‚ö†Ô∏è  –°–µ—Ä–≤–∏—Å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è"
```

**–§–∞–π–ª –ª–æ–≥–æ–≤**: `$SCRIPT_DIR/logs/quark-manager.log`

**–§–æ—Ä–º–∞—Ç –ª–æ–≥–∞**:
```
[2025-11-06 10:30:15] [INFO] –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞ auth-service
[2025-11-06 10:30:18] [SUCCESS] ‚úÖ –ó–∞–ø—É—Å–∫ –∑–∞–≤–µ—Ä—à–µ–Ω!
[2025-11-06 10:30:20] [ERROR] ‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
```

**–í–∞–∂–Ω–æ**: –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `print_log` –≤–º–µ—Å—Ç–æ `echo` –¥–ª—è –≤–∞–∂–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π - —ç—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É –æ–ø–µ—Ä–∞—Ü–∏–π.

---

### 4. show_logo() - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ

```bash
show_logo() {
    echo ""
    echo -e "${CYAN}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}"
    echo -e "${CYAN}         ‚ñë‚ñí‚ñì‚ñà QUARK –ú–ö–° SERVICE MANAGER v2.0 ‚ñà‚ñì‚ñí‚ñë${NC}"
    echo -e "${CYAN}             –ú–ö–° - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏${NC}"
    echo -e "${CYAN}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}"
    echo ""
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ö—Ä–∞—Å–∏–≤–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ª—é–±–æ–π –∫–æ–º–∞–Ω–¥—ã.

**–í—ã–∑—ã–≤–∞–µ—Ç—Å—è**: –í –Ω–∞—á–∞–ª–µ `main()` –ø–æ—Å–ª–µ `check_env_file()` –∏ –ø–µ—Ä–µ–¥ `check_requirements()`

**–≠—Å—Ç–µ—Ç–∏–∫–∞**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Unicode —Å–∏–º–≤–æ–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è

---

### 5. show_help() - –°–ø—Ä–∞–≤–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

```bash
show_help() {
    echo ""
    echo -e "${WHITE}–ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï:${NC}"
    echo "    ./quark-manager.sh [–ö–û–ú–ê–ù–î–ê] [–û–ü–¶–ò–ò] [–°–ï–†–í–ò–°–´...]"
    echo ""
    echo -e "${WHITE}–ö–û–ú–ê–ù–î–´:${NC}"
    echo -e "    ${GREEN}start${NC}       –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã"
    echo -e "    ${GREEN}stop${NC}        –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã"
    # ... –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í—ã–≤–æ–¥–∏—Ç –ø–æ–ª–Ω—É—é —Å–ø—Ä–∞–≤–∫—É –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å–∫—Ä–∏–ø—Ç–∞.

**–†–∞–∑–¥–µ–ª—ã —Å–ø—Ä–∞–≤–∫–∏**:
1. **–ö–û–ú–ê–ù–î–´** - –±–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (start, stop, restart, status, logs)
2. **UI –ö–û–ú–ê–ù–î–´** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º (ui:dev, ui:build, ui:start)
3. **SPEC-DRIVEN –ö–û–ú–ê–ù–î–´** - —Ä–∞–±–æ—Ç–∞ —Å–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è–º–∏ (spec:new, spec:validate)
4. **VAULT & SECURITY** - –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (vault:init, security:check)
5. **–û–ü–¶–ò–ò** - —Ñ–ª–∞–≥–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
6. **–ü–†–ò–ú–ï–†–´** - —Ç–∏–ø–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞**: 
- –§–ª–∞–≥ `--help` –∏–ª–∏ `-h`
- –ó–∞–ø—É—Å–∫ –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
- –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞

**–í–∞–∂–Ω–æ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥**: –û–±–Ω–æ–≤–∏—Ç–µ —ç—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –≤–º–µ—Å—Ç–µ —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∫–æ–º–∞–Ω–¥—ã –≤ `main()`

---

### 6. check_requirements() - –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
check_requirements() {
    if ! command -v docker &> /dev/null; then
        print_log "$RED" "ERROR" "‚ùå Docker –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!"
        exit 1
    fi

    if ! command -v docker compose &> /dev/null; then
        print_log "$RED" "ERROR" "‚ùå Docker Compose –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!"
        exit 1
    fi

    if [[ ! -f "$COMPOSE_FILE" ]]; then
        print_log "$RED" "ERROR" "‚ùå –§–∞–π–ª docker-compose.yml –Ω–µ –Ω–∞–π–¥–µ–Ω: $COMPOSE_FILE"
        exit 1
    fi
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫–æ–º–∞–Ω–¥.

**–ü—Ä–æ–≤–µ—Ä–∫–∏**:
1. ‚úÖ Docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –≤ PATH
2. ‚úÖ Docker Compose v2 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (`docker compose`, –Ω–µ `docker-compose`)
3. ‚úÖ `docker-compose.yml` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞

**–ö—Ä–∏—Ç–∏—á–Ω–æ**: 
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—Å `docker compose` (v2, –±–µ–∑ –¥–µ—Ñ–∏—Å–∞)
- –°–º. `/docs/CRITICAL-CONFIG.md` —Ä–∞–∑–¥–µ–ª "Docker Compose v2.30.3"

**–ü—Ä–∏ –æ—à–∏–±–∫–µ**: –°–∫—Ä–∏–ø—Ç –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è —Å exit code 1 –∏ –ø–æ–Ω—è—Ç–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º

**–ö–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è**: –í —Ñ—É–Ω–∫—Ü–∏–∏ `main()` —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ `show_logo()`

---

### 7. validate_service() - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–µ–Ω–∏ —Å–µ—Ä–≤–∏—Å–∞

```bash
validate_service() {
    if ! docker compose config --services | grep -q "^$1$"; then
        print_log "$RED" "ERROR" "‚ùå –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å: $1"
        print_log "$YELLOW" "INFO" "–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã:"
        docker compose config --services | sed 's/^/  /'
        return 1
    fi
    return 0
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –∏–º—è —Å–µ—Ä–≤–∏—Å–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ `docker-compose.yml`.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: `$1` - –∏–º—è —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏  
**–í–æ–∑–≤—Ä–∞—Ç**: 
- `0` (success) - —Å–µ—Ä–≤–∏—Å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- `1` (failure) - —Å–µ—Ä–≤–∏—Å –Ω–µ –Ω–∞–π–¥–µ–Ω

**–ú–µ—Ö–∞–Ω–∏–∑–º —Ä–∞–±–æ—Ç—ã**:
1. –í—ã–ø–æ–ª–Ω—è–µ—Ç `docker compose config --services` - –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –∏–∑ YAML
2. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `grep -q "^$1$"` –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è (–∏—Å–∫–ª—é—á–∞–µ—Ç —á–∞—Å—Ç–∏—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è)
3. –ü—Ä–∏ –æ—à–∏–±–∫–µ –≤—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
validate_service "auth-service" || exit 1

# –í —Ü–∏–∫–ª–µ –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
for service in "${services[@]}"; do
    validate_service "$service" || exit 1
done
```

**–í–∞–∂–Ω–æ**: 
- ‚ö†Ô∏è –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ö–∞—Ä–¥–∫–æ–¥ —Å–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —á–∏—Ç–∞–µ—Ç –∏–∑ `docker-compose.yml`
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –µ—Å–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ YAML –∏–∑–º–µ–Ω–∏–ª–∞—Å—å

---

### 8. show_status() - –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

```bash
show_status() {
    echo ""
    print_log "$BLUE" "INFO" "üìä –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤ –ú–ö–° Quark"
    echo ""
    
    # –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
    local services=$(docker compose ps --format '{{.Name}}' 2>/dev/null)
    
    if [[ -z "$services" ]]; then
        print_log "$YELLOW" "WARN" "‚ö†Ô∏è  –ù–µ—Ç –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤"
        return
    fi
    
    # –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
    while IFS= read -r container; do
        # –ü–æ–ª—É—á–∞–µ–º —Å—Ç–∞—Ç—É—Å –∏ health
        local status=$(docker inspect --format '{{.State.Status}}' "$container")
        local health=$(docker inspect --format '{{.State.Health.Status}}' "$container")
        
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–∫–æ–Ω–∫—É
        if [[ "$status" == "running" ]]; then
            if [[ "$health" == "healthy" ]]; then
                status_icon="‚úÖ"
                status_color="$GREEN"
            elif [[ "$health" == "starting" ]]; then
                status_icon="‚è≥"
                status_color="$YELLOW"
            elif [[ "$health" == "unhealthy" ]]; then
                status_icon="‚ùå"
                status_color="$RED"
            else
                status_icon="‚ñ∂Ô∏è"
                status_color="$GREEN"
            fi
        elif [[ "$status" == "restarting" ]]; then
            status_icon="üîÑ"
            status_color="$YELLOW"
        elif [[ "$status" == "exited" ]]; then
            status_icon="‚èπÔ∏è"
            status_color="$RED"
        fi
        
        echo -e "  ${status_color}${status_icon} ${service_name}${NC}"
    done
    
    # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    echo -e "${CYAN}üìà –í—Å–µ–≥–æ: $total | ‚ñ∂Ô∏è –ó–∞–ø—É—â–µ–Ω–æ: $running | ‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ: $stopped${NC}"
    
    # –ü–æ–¥—Ä–æ–±–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞
    docker compose ps
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ö—Ä–∞—Å–∏–≤–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ —Å —Ü–≤–µ—Ç–Ω—ã–º–∏ –∏–∫–æ–Ω–∫–∞–º–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π.

**–í—ã–≤–æ–¥ –≤–∫–ª—é—á–∞–µ—Ç**:
1. **–ö—Ä–∞—Ç–∫–∏–π –æ–±–∑–æ—Ä** - —Å–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–∏—Å–æ–≤ —Å –∏–∫–æ–Ω–∫–∞–º–∏ —Å—Ç–∞—Ç—É—Å–∞
2. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Å–µ–≥–æ/–∑–∞–ø—É—â–µ–Ω–æ/–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
3. **–ü–æ–¥—Ä–æ–±–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞** - –≤—ã–≤–æ–¥ `docker compose ps` —Å –ø–æ—Ä—Ç–∞–º–∏ –∏ –∫–æ–º–∞–Ω–¥–∞–º–∏

**–°—Ç–∞—Ç—É—Å—ã –∏ –∏–∫–æ–Ω–∫–∏**:
- ‚úÖ `running + healthy` - —Å–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –ø—Ä–æ—Ö–æ–¥–∏—Ç health checks
- ‚è≥ `running + starting` - —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –∂–¥—ë—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- ‚ùå `running + unhealthy` - —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω, –Ω–æ health check –ø–∞–¥–∞–µ—Ç
- ‚ñ∂Ô∏è `running` - —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω (health check –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
- ‚èπÔ∏è `exited` - —Å–µ—Ä–≤–∏—Å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- üîÑ `restarting` - —Å–µ—Ä–≤–∏—Å –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
- ‚ùì `unknown` - –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

**–ö–æ–º–∞–Ω–¥–∞**: `./quark-manager.sh status`

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞**:
```
üìä –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤ –ú–ö–° Quark

–ö—Ä–∞—Ç–∫–∏–π –æ–±–∑–æ—Ä:

  ‚úÖ auth
  ‚úÖ blog-service
  ‚è≥ quark-ui
  ‚ñ∂Ô∏è postgres
  ‚ñ∂Ô∏è redis

üìà –í—Å–µ–≥–æ: 14 | ‚ñ∂Ô∏è –ó–∞–ø—É—â–µ–Ω–æ: 14 | ‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ: 0
```

---

### 9. check_project_structure() - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```bash
check_project_structure() {
    print_log "$CYAN" "INFO" "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞..."
    
    if command -v node &> /dev/null; then
        local tool_path="$SCRIPT_DIR/tools/quark-manager/dist/check-structure.js"
        
        if [[ -f "$tool_path" ]]; then
            if node "$tool_path" --root "$SCRIPT_DIR" --quiet; then
                print_log "$GREEN" "SUCCESS" "‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞"
                return 0
            else
                print_log "$RED" "ERROR" "‚ùå –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –Ω–∞—Ä—É—à–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã!"
                print_log "$YELLOW" "INFO" "üí° –ó–∞–ø—É—Å—Ç–∏—Ç–µ: ./quark-manager.sh check:structure"
                return 1
            fi
        else
            print_log "$YELLOW" "WARN" "‚ö†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç check-structure.js –Ω–µ –Ω–∞–π–¥–µ–Ω"
            return 0
        fi
    else
        print_log "$YELLOW" "WARN" "‚ö†Ô∏è Node.js –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É"
        return 0
    fi
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ó–∞–ø—É—Å–∫–∞–µ—Ç Node.js –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –ø—Ä–æ–µ–∫—Ç–∞
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –∏–º–ø–æ—Ä—Ç–æ–≤ –º–µ–∂–¥—É –ø–∞–∫–µ—Ç–∞–º–∏
- –°–æ–±–ª—é–¥–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**: 
- Node.js —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- `tools/quark-manager/dist/check-structure.js` —Å–æ–±—Ä–∞–Ω –∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ**:
- ‚úÖ –ï—Å–ª–∏ Node.js –∏–ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç - –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É (–Ω–µ —Ñ–µ–π–ª–∏—Ç)
- ‚ö†Ô∏è –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –æ—à–∏–±–æ–∫ –≤—ã–≤–æ–¥–∏—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –Ω–æ –ù–ï –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
- üîß –ú–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ñ–ª–∞–≥–æ–º `--skip-structure-check`

**–î–æ–±–∞–≤–ª–µ–Ω–æ**: 2025-11-04 (ADR-008)  
**–°–≤—è–∑–∞–Ω–æ —Å**: 
- `tools/quark-manager/` - Node.js CLI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- `/docs/project-structure-rules.md` - –ü—Ä–∞–≤–∏–ª–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**–í—ã–∑—ã–≤–∞–µ—Ç—Å—è**: –í `main()` –ø–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫–æ–º–∞–Ω–¥—ã

---

### 10. spec_new() - –°–æ–∑–¥–∞–Ω–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

```bash
spec_new() {
    local service_name="$1"
    # ... —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ ...
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é —Å–µ—Ä–≤–∏—Å–∞ –∏–∑ —à–∞–±–ª–æ–Ω–æ–≤:
- –ö–æ–ø–∏—Ä—É–µ—Ç —à–∞–±–ª–æ–Ω—ã –∏–∑ [.specify/templates/](file:///home/odmen/quark/.specify/templates/)
- –°–æ–∑–¥–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –≤ [specs/](file:///home/odmen/quark/specs/)
- –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä
- –ó–∞–º–µ–Ω—è–µ—Ç placeholders –≤ —à–∞–±–ª–æ–Ω–∞—Ö

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `$1` - –ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –±—É–¥–µ—Ç –∑–∞–ø—Ä–æ—à–µ–Ω–æ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏)

**–í–æ–∑–≤—Ä–∞—Ç**: –°–æ–∑–¥–∞–Ω–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –≤ [specs/](file:///home/odmen/quark/specs/)

**–î–æ–±–∞–≤–ª–µ–Ω–æ**: 2025-11-06 (ADR-013)  
**–°–≤—è–∑–∞–Ω–æ —Å**: 
- [specs/](file:///home/odmen/quark/specs/) - –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π
- [.specify/templates/](file:///home/odmen/quark/.specify/templates/) - —à–∞–±–ª–æ–Ω—ã
- [docs/spec-driven-summary.md](file:///home/odmen/quark/docs/spec-driven-summary.md) - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –ø–æ–¥—Ö–æ–¥—É

**–ö–æ–º–∞–Ω–¥–∞**: `./quark-manager.sh spec:new <service-name>`

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```bash
# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ
./quark-manager.sh spec:new

# –°–æ–∑–¥–∞–Ω–∏–µ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∏–º–µ–Ω–∏
./quark-manager.sh spec:new messaging-service

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
ls specs/
cat specs/002-messaging-service/spec.md
```

---

### 11. spec_validate() - –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π

```bash
spec_validate() {
    local spec_dir="${1:-specs}"
    # ... —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ ...
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å –ø–æ–º–æ—â—å—é –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤:
- OpenAPI –≤–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ spectral (Docker)
- AsyncAPI –≤–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ @asyncapi/cli (Docker)

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `$1` - –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "specs")

**–í–æ–∑–≤—Ä–∞—Ç**: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**: 
- Docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω
- –î–æ—Å—Ç—É–ø –∫ Docker Hub –¥–ª—è pull –æ–±—Ä–∞–∑–æ–≤

**–î–æ–±–∞–≤–ª–µ–Ω–æ**: 2025-11-06 (ADR-013)  
**–°–≤—è–∑–∞–Ω–æ —Å**: 
- [specs/](file:///home/odmen/quark/specs/) - –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π
- [docs/spec-driven-summary.md](file:///home/odmen/quark/docs/spec-driven-summary.md) - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –ø–æ–¥—Ö–æ–¥—É

**–ö–æ–º–∞–Ω–¥–∞**: `./quark-manager.sh spec:validate [spec-dir]`

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```bash
# –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π
./quark-manager.sh spec:validate

# –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
./quark-manager.sh spec:validate 001-user-service

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
echo $?
```

---

### 12. start_services() - –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

```bash
start_services() {
    local services=("$@")
    
    if [[ ${#services[@]} -eq 0 ]]; then
        print_log "$GREEN" "INFO" "üöÄ –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –ú–ö–°..."
        docker compose up -d
    else
        print_log "$GREEN" "INFO" "üöÄ –ó–∞–ø—É—Å–∫ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤: ${services[*]}"
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∏–º–µ–Ω
        for service in "${services[@]}"; do
            validate_service "$service" || exit 1
        done
        docker compose up -d "${services[@]}"
    fi
    
    print_log "$GREEN" "SUCCESS" "‚úÖ –ó–∞–ø—É—Å–∫ –∑–∞–≤–µ—Ä—à–µ–Ω!"
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ó–∞–ø—É—Å–∫–∞–µ—Ç Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ detached —Ä–µ–∂–∏–º–µ.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: 
- –ë–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ - –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏–∑ `docker-compose.yml`
- –° –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ - —Ç–æ–ª—å–∫–æ —É–∫–∞–∑–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

**–§–ª–∞–≥–∏ Docker Compose**:
- `-d` (detached) - –∑–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ

**–ü—Ä–∏–º–µ—Ä—ã**:
```bash
./quark-manager.sh start                          # –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã
./quark-manager.sh start auth-service redis       # –¢–æ–ª—å–∫–æ auth –∏ redis
./quark-manager.sh start postgres vault nats      # –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `validate_service()`

**–°–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã**:
- `restart` - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ + –∑–∞–ø—É—Å–∫
- `rebuild` - –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ + –∑–∞–ø—É—Å–∫

---

### 13. stop_services() - –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

```bash
stop_services() {
    local services=("$@")
    
    if [[ ${#services[@]} -eq 0 ]]; then
        print_log "$YELLOW" "INFO" "‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤..."
        docker compose down
    else
        print_log "$YELLOW" "INFO" "‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤: ${services[*]}"
        for service in "${services[@]}"; do
            validate_service "$service" || exit 1
        done
        for service in "${services[@]}"; do
            docker compose stop "$service"
        done
    fi
    
    print_log "$YELLOW" "SUCCESS" "‚úÖ –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ `start_services()`

**–í–∞–∂–Ω–æ–µ —Ä–∞–∑–ª–∏—á–∏–µ –≤ –ø–æ–≤–µ–¥–µ–Ω–∏–∏**:
- **–ë–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**: `docker compose down` 
  - –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
  - –£–¥–∞–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
  - –£–¥–∞–ª—è–µ—Ç —Å–µ—Ç–∏
  - ‚ö†Ô∏è Volumes –ù–ï —É–¥–∞–ª—è—é—Ç—Å—è (–¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è)
  
- **–° –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏**: `docker compose stop <service>`
  - –¢–æ–ª—å–∫–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
  - –ù–ï —É–¥–∞–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
  - –ú–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–Ω–æ–≤–∞

**–ü—Ä–∏–º–µ—Ä—ã**:
```bash
./quark-manager.sh stop                    # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ
./quark-manager.sh stop auth-service       # –¢–æ–ª—å–∫–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å auth
```

---

### 14. rebuild_services() - –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤

```bash
rebuild_services() {
    local services=("$@")
    
    if [[ ${#services[@]} -eq 0 ]]; then
        print_log "$PURPLE" "INFO" "üî® –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤..."
        docker compose build --no-cache
    else
        print_log "$PURPLE" "INFO" "üî® –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤: ${services[*]}"
        for service in "${services[@]}"; do
            validate_service "$service" || exit 1
        done
        docker compose build --no-cache "${services[@]}"
    fi
    
    print_log "$PURPLE" "SUCCESS" "‚úÖ –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç Docker-–æ–±—Ä–∞–∑—ã —Å –Ω—É–ª—è –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–µ—à–∞.

**–§–ª–∞–≥–∏**:
- `--no-cache` - –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç BuildKit –∫–µ—à —Å–ª–æ—ë–≤, –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**:
- üîß –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è Dockerfile
- üì¶ –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (package.json)
- üêõ –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –ø—Ä–æ–±–ª–µ–º —Å–æ —Å–±–æ—Ä–∫–æ–π
- üóëÔ∏è –î–ª—è –æ—á–∏—Å—Ç–∫–∏ –±–∏—Ç–æ–≥–æ –∫–µ—à–∞

**–ü—Ä–∏–º–µ—Ä—ã**:
```bash
./quark-manager.sh build                    # –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –≤—Å–µ
./quark-manager.sh build quark-ui          # –¢–æ–ª—å–∫–æ UI
./quark-manager.sh rebuild auth-service    # –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
```

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –° Verdaccio –∏ BuildKit –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç 20-35 —Å–µ–∫—É–Ω–¥

---

### 15. health_check() - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è

```bash
health_check() {
    print_log "$CYAN" "INFO" "üè• –ü—Ä–æ–≤–µ—Ä–∫–∞ health API —Å–µ—Ä–≤–∏—Å–æ–≤..."
    print_log "$CYAN" "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê"
    
    for service in $(docker compose config --services); do
        if docker compose ps --format json | grep -q "\"$service\""; then
            if docker compose ps --format json | grep "\"$service\"" | grep -q '"running"'; then
                print_log "$GREEN" "SUCCESS" "‚úÖ $service - —Ä–∞–±–æ—Ç–∞–µ—Ç"
            else
                print_log "$YELLOW" "WARN" "‚ö†Ô∏è $service - –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
            fi
        else
            print_log "$RED" "ERROR" "‚ùå $service - –Ω–µ —Å–æ–∑–¥–∞–Ω"
        fi
    done
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç health-—Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.

**–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è**:
1. ‚úÖ –°–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω (running)
2. ‚ö†Ô∏è –°–µ—Ä–≤–∏—Å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (stopped/exited)
3. ‚ùå –°–µ—Ä–≤–∏—Å –Ω–µ —Å–æ–∑–¥–∞–Ω (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: `./quark-manager.sh health`

**–û—Ç–ª–∏—á–∏–µ –æ—Ç status**: 
- `status` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
- `health` - –±—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

---

### 16. main() - –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û

```bash
main() {
    # 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ .env —Ñ–∞–π–ª–∞
    check_env_file
    
    # 2. –í—ã–≤–æ–¥ –ª–æ–≥–æ—Ç–∏–ø–∞
    show_logo
    
    # 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker –∏ Compose
    check_requirements
    
    # 4. –ü–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
    local command=""
    local force=false
    local quiet=false
    local verbose=false
    local services=()
    
    while [[ $# -gt 0 ]]; do
        case $1 in
            # –ö–æ–º–∞–Ω–¥—ã
            start|stop|restart|build|rebuild|status|health|logs|clean|hard-reboot|menu|list|ui:dev|ui:build|ui:start|ui:open|spec:new|spec:validate|spec:types|spec:mock|spec:generate-tests|vault:init|security:check|check:structure)
                command="$1"
                shift
                ;;
            # –§–ª–∞–≥–∏
            -f|--force)
                force=true
                shift
                ;;
            -q|--quiet)
                quiet=true
                shift
                ;;
            -v|--verbose)
                verbose=true
                shift
                ;;
            --skip-env-check)
                SKIP_ENV_CHECK=true
                shift
                ;;
            --skip-outdated-check)
                export SKIP_PACKAGE_CHECK=true
                shift
                ;;
            --skip-structure-check)
                export SKIP_STRUCTURE_CHECK=true
                shift
                ;;
            -h|--help)
                show_help
                exit 0
                ;;
            # –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ - –∏–º–µ–Ω–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
            *)
                services+=("$1")
                shift
                ;;
        esac
    done
    
    # 5. –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –Ω–µ —É–∫–∞–∑–∞–Ω–∞, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–º–æ—â—å
    if [[ -z "$command" ]]; then
        show_help
        exit 0
    fi
    
    # 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    if [[ "$command" != "help" ]] && [[ -z "$SKIP_STRUCTURE_CHECK" ]]; then
        check_project_structure || true  # –ù–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
    fi
    
    # 7. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
    case $command in
        start)
            start_services "${services[@]}"
            show_status
            ;;
        stop)
            stop_services "${services[@]}"
            ;;
        restart)
            stop_services "${services[@]}"
            sleep 2
            start_services "${services[@]}"
            show_status
            ;;
        build)
            rebuild_services "${services[@]}"
            ;;
        rebuild)
            rebuild_services "${services[@]}"
            start_services "${services[@]}"
            show_status
            ;;
        status)
            show_status
            ;;
        health)
            health_check
            ;;
        logs)
            if [[ ${#services[@]} -eq 0 ]]; then
                docker compose logs
            else
                docker compose logs "${services[@]}"
            fi
            ;;
        clean)
            print_log "$RED" "WARN" "üßπ –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ –æ–±—Ä–∞–∑–æ–≤..."
            docker compose down --rmi all --volumes --remove-orphans
            docker system prune -f
            print_log "$RED" "SUCCESS" "‚úÖ –û—á–∏—Å—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
            ;;
        hard-reboot)
            print_log "$RED" "WARN" "‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã!"
            read -p "–í—ã —É–≤–µ—Ä–µ–Ω—ã? (yes/no): " -r
            if [[ $REPLY == "yes" ]]; then
                docker compose down --rmi all --volumes --remove-orphans
                docker system prune -af --volumes
                print_log "$GREEN" "SUCCESS" "‚úÖ –°–∏—Å—Ç–µ–º–∞ –æ—á–∏—â–µ–Ω–∞. –ó–∞–ø—É—Å—Ç–∏—Ç–µ start."
            fi
            ;;
        list)
            echo -e "${WHITE}üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –ú–ö–° Quark:${NC}"
            docker compose config --services
            ;;
        check:structure)
            check_project_structure
            ;;
        vault:init|security:check|ui:dev|ui:build|ui:start|ui:open|spec:new|spec:validate|spec:types|spec:mock|spec:generate-tests)
            print_log "$YELLOW" "WARN" "‚ö†Ô∏è –ö–æ–º–∞–Ω–¥–∞ $command –µ—â–µ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞"
            ;;
        *)
            print_log "$RED" "ERROR" "‚ùå –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞: $command"
            show_help
            exit 1
            ;;
    esac
}

# –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
main "$@"
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ —Å–∫—Ä–∏–ø—Ç. –ö–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**:

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ `.env` —Ñ–∞–π–ª–∞** - –º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å `--skip-env-check`
2. **–í—ã–≤–æ–¥ –ª–æ–≥–æ—Ç–∏–ø–∞** - –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è** - Docker, Compose, —Ñ–∞–π–ª—ã
4. **–ü–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤** - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã, —Ñ–ª–∞–≥–æ–≤, —Å–ø–∏—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
5. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã** - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è, –º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å
6. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã** - dispatch –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏—é
7. **–í–æ–∑–≤—Ä–∞—Ç exit code** - 0 —É—Å–ø–µ—Ö, 1 –æ—à–∏–±–∫–∞

**–ö–†–ò–¢–ò–ß–ù–û - –ü–†–ê–í–ò–õ–ê –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–Ø**:

1. ‚ö†Ô∏è **–ù–ï —Ä–∞–∑–±–∏–≤–∞–π—Ç–µ** —Ñ—É–Ω–∫—Ü–∏—é –Ω–∞ `parse_args()` –∏ `execute_command()` –±–µ–∑ –ø–æ–Ω–∏–º–∞–Ω–∏—è
2. ‚ö†Ô∏è **–õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** (`local command`, `local services`) –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏
3. ‚ö†Ô∏è –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã:
   - –î–æ–±–∞–≤—å—Ç–µ –≤ —Å—Ç—Ä–æ–∫—É `case $1 in` (–ø–∞—Ä—Å–∏–Ω–≥)
   - –î–æ–±–∞–≤—å—Ç–µ –≤ `case $command in` (–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ)
   - –û–±–Ω–æ–≤–∏—Ç–µ `show_help()`
4. ‚ö†Ô∏è –§–ª–∞–≥–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `shift` - –Ω–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –≤—ã–∑–æ–≤
5. ‚ö†Ô∏è –ò–º–µ–Ω–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤ –º–∞—Å—Å–∏–≤ `services=()` —á–µ—Ä–µ–∑ `*) services+=("$1")`

**–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–±–ª–µ–º**:
- 2025-11-06: –ü–æ–ø—ã—Ç–∫–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–∏–≤–µ–ª–∞ –∫ –≤—ã–∑–æ–≤—É –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö `parse_args()` –∏ `execute_command()`. –§—É–Ω–∫—Ü–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏–∑ git –∏—Å—Ç–æ—Ä–∏–∏.

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
bash -n quark-manager.sh

# –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
./quark-manager.sh --help
./quark-manager.sh status
./quark-manager.sh list

# –° –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
./quark-manager.sh start auth-service
./quark-manager.sh logs postgres
```

---

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ë–∞–∑–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
./quark-manager.sh start

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
./quark-manager.sh start auth-service postgres redis nats

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö (—É–¥–∞–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã)
./quark-manager.sh stop

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö (—Ç–æ–ª—å–∫–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç)
./quark-manager.sh stop auth-service blog-service

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
./quark-manager.sh restart

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö
./quark-manager.sh restart quark-ui

# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
./quark-manager.sh status

# Health check
./quark-manager.sh health

# –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
./quark-manager.sh list
```

### –õ–æ–≥–∏

```bash
# –í—Å–µ –ª–æ–≥–∏
./quark-manager.sh logs

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
./quark-manager.sh logs auth-service

# –õ–æ–≥–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
./quark-manager.sh logs postgres redis

# Follow —Ä–µ–∂–∏–º (—á–µ—Ä–µ–∑ Docker –Ω–∞–ø—Ä—è–º—É—é)
docker compose logs -f auth-service

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
docker compose logs --tail=100 auth-service
```

### –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤

```bash
# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –≤—Å–µ –æ–±—Ä–∞–∑—ã
./quark-manager.sh build

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π
./quark-manager.sh build quark-ui

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ —Å—Ä–∞–∑—É –∑–∞–ø—É—Å—Ç–∏—Ç—å
./quark-manager.sh rebuild auth-service blog-service

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å UI –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
./quark-manager.sh rebuild quark-ui && ./quark-manager.sh status
```

### –û–ø–∞—Å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

```bash
# –û—á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ –æ–±—Ä–∞–∑–æ–≤ (volumes —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è)
./quark-manager.sh clean

# –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ)
./quark-manager.sh hard-reboot
# –í–≤–µ–¥–∏—Ç–µ: yes

# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ volumes (—á–µ—Ä–µ–∑ Docker –Ω–∞–ø—Ä—è–º—É—é)
docker compose down -v
docker volume prune -f
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–ª–∞–≥–æ–≤

```bash
# –ó–∞–ø—É—Å–∫ –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ .env (–¥–ª—è CI/CD)
./quark-manager.sh --skip-env-check start

# –ë–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞
./quark-manager.sh --skip-structure-check start

# –ë–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–µ—Ä—Å–∏–π –ø–∞–∫–µ—Ç–æ–≤
./quark-manager.sh --skip-outdated-check start

# –ö–æ–º–±–∏–Ω–∞—Ü–∏—è —Ñ–ª–∞–≥–æ–≤
./quark-manager.sh --skip-env-check --skip-structure-check start

# –°–ø—Ä–∞–≤–∫–∞
./quark-manager.sh --help
./quark-manager.sh -h
```

### –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫–∏–µ —Å–µ—Ä–≤–∏—Å—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
docker compose config --services

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker inspect quark-auth-service

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å health check —Å—Ç–∞—Ç—É—Å
docker inspect --format='{{.State.Health.Status}}' quark-auth-service

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ health check
docker inspect --format='{{range .State.Health.Log}}{{.Output}}{{end}}' quark-auth-service

# –ó–∞–π—Ç–∏ –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker compose exec auth-service sh

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ç—å
docker network inspect quark_default
```

---

## üîç –ü–æ–∏—Å–∫ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –§–∞–π–ª—ã –ª–æ–≥–æ–≤

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ —Ñ–∞–π–ª:
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —Å–∫—Ä–∏–ø—Ç–∞
cat logs/quark-manager.log

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f logs/quark-manager.log

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫
tail -n 50 logs/quark-manager.log

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
grep ERROR logs/quark-manager.log

# –õ–æ–≥–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è
grep "$(date '+%Y-%m-%d')" logs/quark-manager.log
```

**–§–æ—Ä–º–∞—Ç –ª–æ–≥–∞**:
```
[2025-11-06 10:30:15] [INFO] üöÄ –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –ú–ö–°...
[2025-11-06 10:30:18] [SUCCESS] ‚úÖ –ó–∞–ø—É—Å–∫ –∑–∞–≤–µ—Ä—à–µ–Ω!
[2025-11-06 10:30:20] [ERROR] ‚ùå –°–µ—Ä–≤–∏—Å auth-service –Ω–µ –∑–∞–ø—É—â–µ–Ω
```

### –û—Ç–ª–∞–¥–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
bash -n quark-manager.sh

# –ó–∞–ø—É—Å–∫ —Å trace (–∫–∞–∂–¥–∞—è –∫–æ–º–∞–Ω–¥–∞ –≤—ã–≤–æ–¥–∏—Ç—Å—è)
bash -x quark-manager.sh status

# –í—Ä–µ–º–µ–Ω–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –Ω–∞—á–∞–ª–æ —Å–∫—Ä–∏–ø—Ç–∞:
#!/bin/bash
set -x  # –í–∫–ª—é—á–∏—Ç—å trace —Ä–µ–∂–∏–º
set -e  # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ (—É–∂–µ –µ—Å—Ç—å)
set -u  # –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å shellcheck (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
shellcheck quark-manager.sh
```

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**1. "parse_args: command not found"**
- –ü—Ä–∏—á–∏–Ω–∞: –ù–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Ñ—É–Ω–∫—Ü–∏–∏ `main()`
- –†–µ—à–µ–Ω–∏–µ: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ git: `git checkout HEAD -- quark-manager.sh`

**2. "docker-compose: command not found"**
- –ü—Ä–∏—á–∏–Ω–∞: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞—Ä—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
- –†–µ—à–µ–Ω–∏–µ: –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞ `docker compose` (–±–µ–∑ –¥–µ—Ñ–∏—Å–∞)

**3. "–§–∞–π–ª .env –Ω–µ –Ω–∞–π–¥–µ–Ω"**
- –ü—Ä–∏—á–∏–Ω–∞: `.env` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–µ –≤ –∫–æ—Ä–Ω–µ
- –†–µ—à–µ–Ω–∏–µ 1: –°–æ–∑–¥–∞—Ç—å `.env` —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
- –†–µ—à–µ–Ω–∏–µ 2: `./quark-manager.sh --skip-env-check start`

**4. "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å: xxx"**
- –ü—Ä–∏—á–∏–Ω–∞: –û–ø–µ—á–∞—Ç–∫–∞ –≤ –∏–º–µ–Ω–∏ –∏–ª–∏ —Å–µ—Ä–≤–∏—Å –Ω–µ –≤ docker-compose.yml
- –†–µ—à–µ–Ω–∏–µ: `./quark-manager.sh list` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏–º–µ–Ω–∞

**5. –°–∫—Ä–∏–ø—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞: `chmod +x quark-manager.sh`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å shebang: –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å `#!/bin/bash`

---

## üìù –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–∫—Ä–∏–ø—Ç–∞

–ü–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º `quark-manager.sh`:

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

- [ ] ‚úÖ –ü—Ä–æ—á–∏—Ç–∞–ª `/docs/CRITICAL-CONFIG.md`
- [ ] ‚úÖ –°–æ–∑–¥–∞–ª —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é: `cp quark-manager.sh quark-manager.sh.backup`
- [ ] ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏–ª —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é: `git diff quark-manager.sh`
- [ ] ‚úÖ –ü–æ–Ω–∏–º–∞—é, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è `main()`
- [ ] ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏–ª –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è (–∫–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã)

### –ò–∑–º–µ–Ω–µ–Ω–∏—è

- [ ] ‚úÖ –ù–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `case $1 in` (–ø–∞—Ä—Å–∏–Ω–≥)
- [ ] ‚úÖ –ù–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `case $command in` (–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ)
- [ ] ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω `show_help()` —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∫–æ–º–∞–Ω–¥—ã
- [ ] ‚úÖ –ò—Å–ø–æ–ª—å–∑—É—é `print_log` –≤–º–µ—Å—Ç–æ `echo` –¥–ª—è –≤–∞–∂–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- [ ] ‚úÖ –ò—Å–ø–æ–ª—å–∑—É—é `validate_service()` –ø–µ—Ä–µ–¥ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏
- [ ] ‚úÖ –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ `local`

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- [ ] ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞: `bash -n quark-manager.sh`
- [ ] ‚úÖ –¢–µ—Å—Ç —Å–ø—Ä–∞–≤–∫–∏: `./quark-manager.sh --help`
- [ ] ‚úÖ –¢–µ—Å—Ç –±–∞–∑–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥: `status`, `list`
- [ ] ‚úÖ –¢–µ—Å—Ç –Ω–æ–≤–æ–π –∫–æ–º–∞–Ω–¥—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- [ ] ‚úÖ –¢–µ—Å—Ç –Ω–æ–≤–æ–π –∫–æ–º–∞–Ω–¥—ã –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- [ ] ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è: `cat logs/quark-manager.log`

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [ ] ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç (`/docs/quark-manager.md`)
- [ ] ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–π –∫–æ–º–∞–Ω–¥—ã
- [ ] ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–Ω—Ü–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- [ ] ‚úÖ –ö–æ–º–º–∏—Ç —Å –ø–æ–Ω—è—Ç–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º: `git commit -m "feat(manager): –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ xxx"`

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `/docs/CRITICAL-CONFIG.md` - **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ß–ò–¢–ê–¢–¨ –ü–ï–†–ï–î –ü–†–ê–í–ö–û–ô**
- `/docs/project-structure.md` - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- `/docs/project-structure-rules.md` - –ü—Ä–∞–≤–∏–ª–∞ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è –∏ –∏–º–ø–æ—Ä—Ç–æ–≤
- `ADR-008` - Node.js CLI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- `ADR-010` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞–º–∏ —á–µ—Ä–µ–∑ .env
- `README.md` - –û–±—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

---

## üìä –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

| –î–∞—Ç–∞       | –í–µ—Ä—Å–∏—è | –ò–∑–º–µ–Ω–µ–Ω–∏—è | –ê–≤—Ç–æ—Ä |
|------------|--------|-----------|-------|
| 2025-11-06 | 2.2 | –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ `spec_new()` –∏ `spec_validate()`, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è spec-driven –∫–æ–º–∞–Ω–¥ | AI Assistant |
| 2025-11-06 | 2.1 | –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `check_env_file()`, —Ñ–ª–∞–≥ `--skip-env-check`, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å .env | - |
| 2025-11-06 | 2.0.1 | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `main()` –ø–æ—Å–ª–µ –Ω–µ—É–¥–∞—á–Ω–æ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ git) | GitHub Copilot |
| 2025-11-04 | 2.0 | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ Docker Compose v2 (`docker compose` –≤–º–µ—Å—Ç–æ `docker-compose`) | - |
| 2025-11-04 | 1.9 | –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Node.js `check-structure.js`, —Ñ–ª–∞–≥ `--skip-structure-check` | - |
| 2025-10-02 | 1.0 | –ü–µ—Ä–≤–∞—è –≤–µ—Ä—Å–∏—è —Å–∫—Ä–∏–ø—Ç–∞ —Å –±–∞–∑–æ–≤—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏ | Quark Team |

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å–æ —Å–∫—Ä–∏–ø—Ç–æ–º:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**: `cat logs/quark-manager.log`
2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–ø—Ä–∞–≤–∫—É**: `./quark-manager.sh --help`
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Docker**: `docker version && docker compose version`
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env**: `ls -la .env`
5. **Git –∏—Å—Ç–æ—Ä–∏—è**: `git log --oneline quark-manager.sh`
6. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –æ—Ä–∏–≥–∏–Ω–∞–ª–æ–º**: `git diff HEAD quark-manager.sh`

### –û—Ç–ª–∞–¥–∫–∞

```bash
# –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
bash -x ./quark-manager.sh status

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
bash -n quark-manager.sh

# –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
shellcheck quark-manager.sh
```

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2025-11-06  
**–ê–≤—Ç–æ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**: GitHub Copilot, AI Assistant  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ê–ö–¢–£–ê–õ–¨–ù–û  
**–í–∞–∂–Ω–æ—Å—Ç—å**: üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –î–û–ö–£–ú–ï–ù–¢
